<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VYBS</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Advent+Pro:wght@400;700&family=Kanit:wght@400;700&display=swap');

html, body { margin: 0; padding: 0; }
canvas, #riveCanvas {
  position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: block;
}
#riveCanvas {
  position: fixed; top: 0; left: 0;
  width: 100vw; height: 100vh;
  display: block; z-index: 1;
}
.holder {
  display: flex; justify-content: center; align-items: flex-start;
  font-family: "Kanit", sans-serif; position: relative; z-index: 0;
}
h2 { font-family: "Kanit", sans-serif; }
</style>
</head>
<body>
  <!-- Loader -->
  <div id="loader" style="position: fixed; inset: 0; background: white; display: flex; align-items: center; justify-content: center; z-index: 9999;">
    <h2>Loading...</h2>
  </div>

  <div class="holder"><img src="v3-scroll content up1.png" alt="" /></div>

  <button id="toggleBtn" style="
    position: fixed; bottom: 20px; right: 20px; z-index: 10000;
    padding: 12px 24px; font-size: 16px; border-radius: 8px; cursor: pointer;">
    Toggle Artboard
  </button>

  <canvas id="riveCanvas"></canvas>

  <script src="https://unpkg.com/@rive-app/canvas"></script>
  <script>
    const riveCanvas = document.getElementById('riveCanvas');
    const toggleBtn  = document.getElementById('toggleBtn');
    const loader     = document.getElementById('loader');

    const dpr = window.devicePixelRatio || 1;

    // Both artboards and their matching state machines
    const SCENES = [
      { artboard: "onboarding1", stateMachine: "onboarding1" },
      { artboard: "secondon", stateMachine: "secondon" }
    ];

    let currentScene = 0;
    let riveInstance = null;

    function resizeCanvas() {
      const w = window.innerWidth, h = window.innerHeight;
      riveCanvas.width = w * dpr;
      riveCanvas.height = h * dpr;
      riveCanvas.style.width = w + "px";
      riveCanvas.style.height = h + "px";
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function loadRiveScene() {
      const { artboard, stateMachine } = SCENES[currentScene];

      if (riveInstance) {
        try { riveInstance.cleanup(); } catch(e) {}
        riveInstance = null;
      }

      loader.style.display = "flex";
      riveCanvas.style.display = "none";

      riveInstance = new rive.Rive({
        src: "vybs_onboarding_Oleh1.riv",
        canvas: riveCanvas,
        artboard: artboard,
        stateMachines: stateMachine,
        autoplay: true, // play immediately
        fit: rive.Fit.Contain,
        alignment: rive.Alignment.Center,
        devicePixelRatio: dpr,

        onLoad: () => {
          loader.style.display = "none";
          riveCanvas.style.display = "block";
          console.log(`▶️ Playing artboard "${artboard}" with state machine "${stateMachine}"`);
        },

        onStateChange: (event) => {
          console.log("State change:", event.data);
        },

        onError: (err) => {
          console.error("Rive error:", err);
          loader.style.display = "none";
          riveCanvas.style.display = "block";
        }
      });
    }

    toggleBtn.addEventListener("click", () => {
      currentScene = currentScene === 0 ? 1 : 0;
      loadRiveScene();
    });

    // Initial auto-load and playback
    loadRiveScene();
  </script>
</body>
</html>
